{% extends 'base2.html' %}
{% load static %}
{% block content %}

<!DOCTYPE html>
<html lang="en">
<link href="static/assets/css/style-figma.css" rel="stylesheet">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body style="background-color: #000000;
height: auto;
overflow-x: hidden;
">

<style>
    #content11 {
           overflow-y: scroll;
           width: 830px;
           height: 340px;
        }

    #wrapper11 {
            display: grid;
            grid-template-rows: 10px 1fr 10px;
        }

    #wrapper12 {
            display: grid;
            grid-template-rows: 39px 5fr 39px;
        }

    #wrapper13 {
            display: grid;
            grid-template-rows: 39px 5fr 39px;
        }

    #wrapper14 {
            display: grid;
            grid-template-rows: 39px 5fr 39px;
        }

    #wrapper15 {
            display: grid;
            grid-template-rows: 39px 5fr 39px;
        }

    div.sticky {
        position: -webkit-sticky;
        position: sticky;
        top: 0;
        background-color: yellow;
        padding: 20px;
        font-size: 20px;
      }
</style>

<script>
    window.onload = function(){
            console.log('inside the function')


            data = {{data|safe}}
            console.log('data is:' + data)
    }

    function getNum(i){
        console.log('I am in')
        a = i
        console.log(a)
        window.location.href = "{% url 'detail' %}" + '?search='+i
        console.log('clicked number' + i)
    }


</script>
<div style="padding-top:50px;">
    <button type="button" onclick="history.back()" style="display: none;" id="back-btn" ></button>
    <a href="#" style="color:white; margin-left:100px; margin-top:60px;" onclick="document.getElementById('back-btn').click()"  alt="Back"><b>BACK</b></a>
    <form method="POST" class="form-horizontal" action="result">
        {% csrf_token %}
    <p class="text-white" style="margin-top:20px; margin-left:500px;Font-size:20px;"><b>Image Analytics - Bottle</b></p>
    <div style="margin-left:150px; width:960px; height:350px; background-color:white;">
        <div style="float:left;">
            <h5 style="margin-left:120px; margin-top:10px; color:#7249AE;"><b>Pie Chart</b></h5>
            <img src="media/piechart/bottle_pie.png" height="300" width="300">
            <p style="margin-left:300px; margin-top:-200px; width:200px; color:#7249AE;"><strong>Uploaded Images: {{total}} </strong></p>
            <p style="margin-left:300px; width:200px; color:#7249AE;"><strong>Non-Defective: {{good}} </strong></p>
            <p style="margin-left:300px; width:200px; color:#7249AE;"><strong>Defective: {{bad}} </strong></p>
        </div>
<!--        {% for i in image %}-->
<!--            <img src="media/fig1/{{i}}" style="margin-left:50px;" height="200" width="300">-->
<!--        {% endfor %}-->
        <div style="float:right;">
            <h5 style="margin-left:150px; margin-top:10px; color:#7249AE;"><b>Bar Chart</b></h5>
            <h5 style="margin-left:50px; color:#7249AE; width:400px; font-size:12px;"><b>If lift range is 1 then image is <b style="color:#12ABDB;">Non-Defective</b>, above than 1 is <b style="color:#FF6327;">Defective</b></b></h5>
            <img src="media/piechart/bottle_bar.png" height="270" width=450">
<!--            <div>-->
<!--                {{fig.show}}-->
<!--            </div>-->
        </div>
    </div>

        <h4 style="color:white; margin-left:450px; font-size:18px;">(To know more detail of each model click on file Name)</h4>
        <div id="content11" style="display: flex;  background-color:white; width:960px; margin-top: 30px; margin-left:150px; overflow-y: scroll; overflow-x:hidden; ">
            <div class="design" style=" margin-left:10px; width:200px; height:auto;">
                <p class="text-white"  id="header" style="padding-top:10px; margin-left:-10px; width:300px; height:52px; background-color: #0070AD; "><b style="margin-left:50px;"> File Name</b></p>
                {% for i in data %}
                    <a href="#"><div class="image" onclick="getNum('{{i.actual_lbl}}')">
                        <p class="text-black" style="margin-left:50px;" name="input_image" id="wrapper12">{{i.actual_lbl}}</p>
                    </div></a>
                {% endfor %}
            </div>
            <div class="design" style=" margin-left:50px; width:200px; height:auto;">
                <center>
                    <p class="text-white" id="header1" style="padding-top:10px; margin-left:-10px; width:300px; height:50px; background-color:#0070AD; "><b style="margin-left:-80px;">Input Images</b></p>
                    {% for i in images %}
                        <img src="media/test/{{i}}" id="wrapper11" height="70" width="70"><br>
                    {% endfor %}
                </center>
            </div>
            <div class="design" style=" margin-left:50px; width:200px; height:auto;">
                <p class="text-white" id="header2" style="padding-top:10px; width:300px; height:50px; background-color: #0070AD; " ><b>Score(range)</b></p>
                {% for i in data %}
                    <p class="text-black" id="wrapper13">{{i.input_img_range}}</p>
                {% endfor %}
            </div>
            <div class="design" style=" margin-left:50px; width:200px; height:auto;">
                <p class="dropdown-content" id="header3" style="padding-top:10px; color:white; width:200px; height:50px; background-color: #0070AD; "><b>Prediction</b></p>
                {% for i in data %}
                {% if i.prediction_result == False %}
                    <p class="text" style="color:red;" id="wrapper14" name="result"><b>{{i.prediction}}</b></p>
                {% elif i.prediction_result == True %}
                    <p class="text" style="color:green;" id="wrapper15" name="result"><b>{{i.prediction}}</b></p>
                {% endif %}
                {% endfor %}
            </div>
        </div>
    </form>
</div>

{% endblock %}
</body>

</html>